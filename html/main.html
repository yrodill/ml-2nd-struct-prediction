<!DOCTYPE html>
<html>

<head>
    
    
    <meta charset="utf8">
    <title>StruBiGL</title>
    
    <script type="text/javascript" , src="../data/mainlybeta.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.13.3/dist/tf.min.js"> </script>
    <script type="module">
        
        'use strict';
        
        // import {svm} from '../javascript/libsvm.js';

        function process(data) {
            let result = [];
            let tab = dataset.split("\n");

            for (let i = 0; i < tab.length; i++) {
                let sequence = "";
                if (tab[i] != "" && tab[i][0] != ">"){
                while (tab[i] != "" && tab[i][0] != ">") {
                    sequence += tab[i];
                    i++;
                }
                result.push(sequence);
            }
            }
            
            console.log(result);

            let objs = []; for (let i = 0; i < result.length; i++) {
                let matrix = { "A": 0, "D": 0, "R": 0, "N": 0, "C": 0, "E": 0, "Q": 0, "G": 0, "H": 0, "I": 0, "L": 0, "K": 0, "M": 0, "F": 0, "P": 0, "S": 0, "T": 0, "W": 0, "Y": 0, "V": 0 }; for (let j = 0; j < result[i].length; j++) { matrix[result[i][j]] += 1; } let len = result[i].length;
                for (let key in matrix) {
                    matrix[key] = matrix[key] / len;
                }
                objs[i] = matrix;
            }
            console.log(objs);
            const model = tf.sequential();
      model.add(tf.layers.dense({units: 1, inputShape: [1]}));

      // Prepare the model for training: Specify the loss and the optimizer.
      model.compile({loss: 'meanSquaredError', optimizer: 'sgd'});

      // Generate some synthetic data for training.
      const xs = tf.tensor2d([1, 2, 3, 4], [4, 1]);
      const ys = tf.tensor2d([1, 3, 5, 7], [4, 1]);

      // Train the model using the data.
      model.fit(xs, ys, {epochs: 10}).then(() => {
        // Use the model to do inference on a data point the model hasn't seen before:
        // Open the browser devtools to see the output
        model.predict(tf.tensor2d([5], [1, 1])).print();
      });
            console.log(model);
        }
        /*MAIN*/
        process(dataset);
    </script>
</head>

<body>
</body>

</html>